this.WalletManager=this.WalletManager||{},this.WalletManager.svelte=function(){"use strict";function e(){}const t=e=>e;function n(e){return e()}function o(){return Object.create(null)}function r(e){e.forEach(n)}function i(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let a;function c(e,t){return a||(a=document.createElement("a")),a.href=t,e===a.href}function l(e,t,n,o){if(e){const r=u(e,t,n,o);return e[0](r)}}function u(e,t,n,o){return e[1]&&o?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](o(t))):n.ctx}function d(e,t,n,o){if(e[2]&&o){const r=e[2](o(n));if(void 0===t.dirty)return r;if("object"==typeof r){const e=[],n=Math.max(t.dirty.length,r.length);for(let o=0;o<n;o+=1)e[o]=t.dirty[o]|r[o];return e}return t.dirty|r}return t.dirty}function f(e,t,n,o,r,i){if(r){const s=u(t,n,o,i);e.p(s,r)}}function p(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}function h(e){return null==e?"":e}const g="undefined"!=typeof window;let m=g?()=>window.performance.now():()=>Date.now(),v=g?e=>requestAnimationFrame(e):e;const w=new Set;function y(e){w.forEach((t=>{t.c(e)||(w.delete(t),t.f())})),0!==w.size&&v(y)}function $(e,t){e.appendChild(t)}function b(e,t,n){const o=x(e);if(!o.getElementById(t)){const e=C("style");e.id=t,e.textContent=n,E(o,e)}}function x(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function k(e){const t=C("style");return E(x(e),t),t.sheet}function E(e,t){return $(e.head||e,t),t.sheet}function S(e,t,n){e.insertBefore(t,n||null)}function j(e){e.parentNode.removeChild(e)}function C(e){return document.createElement(e)}function L(e){return document.createTextNode(e)}function P(){return L(" ")}function R(){return L("")}function _(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function A(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function M(e,t){e.value=null==t?"":t}function N(e,t,n,o){null===n?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}let D;function U(){if(void 0===D){D=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(e){D=!0}}return D}function I(e,t){"static"===getComputedStyle(e).position&&(e.style.position="relative");const n=C("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const o=U();let r;return o?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=_(window,"message",(e=>{e.source===n.contentWindow&&t()}))):(n.src="about:blank",n.onload=()=>{r=_(n.contentWindow,"resize",t)}),$(e,n),()=>{(o||r&&n.contentWindow)&&r(),j(n)}}function H(e,t,n){e.classList[n?"add":"remove"](t)}function O(e,t,{bubbles:n=!1,cancelable:o=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n,o,t),r}const B=new Map;let W,T=0;function z(e,t,n,o,r,i,s,a=0){const c=16.666/o;let l="{\n";for(let e=0;e<=1;e+=c){const o=t+(n-t)*i(e);l+=100*e+`%{${s(o,1-o)}}\n`}const u=l+`100% {${s(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${a}`,f=x(e),{stylesheet:p,rules:h}=B.get(f)||function(e,t){const n={stylesheet:k(t),rules:{}};return B.set(e,n),n}(f,e);h[d]||(h[d]=!0,p.insertRule(`@keyframes ${d} ${u}`,p.cssRules.length));const g=e.style.animation||"";return e.style.animation=`${g?`${g}, `:""}${d} ${o}ms linear ${r}ms 1 both`,T+=1,d}function F(e,t){const n=(e.style.animation||"").split(", "),o=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),r=n.length-o.length;r&&(e.style.animation=o.join(", "),T-=r,T||v((()=>{T||(B.forEach((e=>{const{ownerNode:t}=e.stylesheet;t&&j(t)})),B.clear())})))}function V(e){W=e}function K(){if(!W)throw new Error("Function called outside component initialization");return W}function Y(e){K().$$.on_mount.push(e)}function q(){const e=K();return(t,n,{cancelable:o=!1}={})=>{const r=e.$$.callbacks[t];if(r){const i=O(t,n,{cancelable:o});return r.slice().forEach((t=>{t.call(e,i)})),!i.defaultPrevented}return!0}}function J(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}const X=[],G=[],Z=[],Q=[],ee=Promise.resolve();let te=!1;function ne(e){Z.push(e)}const oe=new Set;let re,ie=0;function se(){const e=W;do{for(;ie<X.length;){const e=X[ie];ie++,V(e),ae(e.$$)}for(V(null),X.length=0,ie=0;G.length;)G.pop()();for(let e=0;e<Z.length;e+=1){const t=Z[e];oe.has(t)||(oe.add(t),t())}Z.length=0}while(X.length);for(;Q.length;)Q.pop()();te=!1,oe.clear(),V(e)}function ae(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ne)}}function ce(e,t,n){e.dispatchEvent(O(`${t?"intro":"outro"}${n}`))}const le=new Set;let ue;function de(){ue={r:0,c:[],p:ue}}function fe(){ue.r||r(ue.c),ue=ue.p}function pe(e,t){e&&e.i&&(le.delete(e),e.i(t))}function he(e,t,n,o){if(e&&e.o){if(le.has(e))return;le.add(e),ue.c.push((()=>{le.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}else o&&o()}const ge={duration:0};function me(n,o,s,a){let c=o(n,s),l=a?0:1,u=null,d=null,f=null;function p(){f&&F(n,f)}function h(e,t){const n=e.b-l;return t*=Math.abs(n),{a:l,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function g(o){const{delay:i=0,duration:s=300,easing:a=t,tick:g=e,css:$}=c||ge,b={start:m()+i,b:o};o||(b.group=ue,ue.r+=1),u||d?d=b:($&&(p(),f=z(n,l,o,s,i,a,$)),o&&g(0,1),u=h(b,s),ne((()=>ce(n,o,"start"))),function(e){let t;0===w.size&&v(y),new Promise((n=>{w.add(t={c:e,f:n})}))}((e=>{if(d&&e>d.start&&(u=h(d,s),d=null,ce(n,u.b,"start"),$&&(p(),f=z(n,l,u.b,u.duration,0,a,c.css))),u)if(e>=u.end)g(l=u.b,1-l),ce(n,u.b,"end"),d||(u.b?p():--u.group.r||r(u.group.c)),u=null;else if(e>=u.start){const t=e-u.start;l=u.a+u.d*a(t/u.duration),g(l,1-l)}return!(!u&&!d)})))}return{run(e){i(c)?(re||(re=Promise.resolve(),re.then((()=>{re=null}))),re).then((()=>{c=c(),g(e)})):g(e)},end(){p(),u=d=null}}}const ve="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function we(e){e&&e.c()}function ye(e,t,o,s){const{fragment:a,on_mount:c,on_destroy:l,after_update:u}=e.$$;a&&a.m(t,o),s||ne((()=>{const t=c.map(n).filter(i);l?l.push(...t):r(t),e.$$.on_mount=[]})),u.forEach(ne)}function $e(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function be(e,t){-1===e.$$.dirty[0]&&(X.push(e),te||(te=!0,ee.then(se)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function xe(t,n,i,s,a,c,l,u=[-1]){const d=W;V(t);const f=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:a,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:o(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};l&&l(f.root);let p=!1;if(f.ctx=i?i(t,n.props||{},((e,n,...o)=>{const r=o.length?o[0]:n;return f.ctx&&a(f.ctx[e],f.ctx[e]=r)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](r),p&&be(t,e)),n})):[],f.update(),p=!0,r(f.before_update),f.fragment=!!s&&s(f.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);f.fragment&&f.fragment.l(e),e.forEach(j)}else f.fragment&&f.fragment.c();n.intro&&pe(t.$$.fragment),ye(t,n.target,n.anchor,n.customElement),se()}V(d)}class ke{$destroy(){$e(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ee=e=>({wallet:1&e,ownerAddress:16&e,RSAPublicKey:4&e,Ed25519PublicKey:8&e}),Se=e=>({wallet:e[0],ownerAddress:e[4],RSAPublicKey:e[2],Ed25519PublicKey:e[3]});function je(e){let t,n,o,r;var i=e[1];i&&(t=new i({}),t.$on("walletReady",e[5]));let s=e[0]&&e[2]&&e[3]&&Ce(e);return{c(){t&&we(t.$$.fragment),n=P(),s&&s.c(),o=R()},m(e,i){t&&ye(t,e,i),S(e,n,i),s&&s.m(e,i),S(e,o,i),r=!0},p(e,r){if(i!==(i=e[1])){if(t){de();const e=t;he(e.$$.fragment,1,0,(()=>{$e(e,1)})),fe()}i?(t=new i({}),t.$on("walletReady",e[5]),we(t.$$.fragment),pe(t.$$.fragment,1),ye(t,n.parentNode,n)):t=null}e[0]&&e[2]&&e[3]?s?(s.p(e,r),13&r&&pe(s,1)):(s=Ce(e),s.c(),pe(s,1),s.m(o.parentNode,o)):s&&(de(),he(s,1,1,(()=>{s=null})),fe())},i(e){r||(t&&pe(t.$$.fragment,e),pe(s),r=!0)},o(e){t&&he(t.$$.fragment,e),he(s),r=!1},d(e){t&&$e(t,e),e&&j(n),s&&s.d(e),e&&j(o)}}}function Ce(e){let t;const n=e[7].default,o=l(n,e,e[6],Se);return{c(){o&&o.c()},m(e,n){o&&o.m(e,n),t=!0},p(e,r){o&&o.p&&(!t||93&r)&&f(o,n,e,e[6],t?d(n,e[6],r,Ee):p(e[6]),Se)},i(e){t||(pe(o,e),t=!0)},o(e){he(o,e),t=!1},d(e){o&&o.d(e)}}}function Le(e){let t,n,o=e[1]&&je(e);return{c(){o&&o.c(),t=R()},m(e,r){o&&o.m(e,r),S(e,t,r),n=!0},p(e,[n]){e[1]?o?(o.p(e,n),2&n&&pe(o,1)):(o=je(e),o.c(),pe(o,1),o.m(t.parentNode,t)):o&&(de(),he(o,1,1,(()=>{o=null})),fe())},i(e){n||(pe(o),n=!0)},o(e){he(o),n=!1},d(e){o&&o.d(e),e&&j(t)}}}function Pe(e,t,n){let o,r,i,s,a,{$$slots:c={},$$scope:l}=t;const u=q();return Y((async()=>{n(1,r=await Promise.resolve().then((function(){return Ht})))})),e.$$set=e=>{"$$scope"in e&&n(6,l=e.$$scope)},[o,r,i,s,a,async function(e){n(0,o=e.detail.wallet),console.log("walletReady",o),n(4,a=await(o?.arweaveWalletAPI?.getActiveAddress())),n(2,i=await o.arweaveWalletAPI.getActivePublicKey()),n(3,s=await o.proxcryptor.getPublicKey()),u("RSAPublicKey",i),u("Ed25519PublicKey",s),u("ownerAddress",a)},l,c]}function Re(e,t,n,o){var r,i=null==(r=o)||"number"==typeof r||"boolean"==typeof r?o:n(o),s=t.get(i);return void 0===s&&(s=e.call(this,o),t.set(i,s)),s}function _e(e,t,n){var o=Array.prototype.slice.call(arguments,3),r=n(o),i=t.get(r);return void 0===i&&(i=e.apply(this,o),t.set(r,i)),i}const Ae=JSON.stringify;function Me(){this.cache=Object.create(null)}Me.prototype.has=function(e){return e in this.cache},Me.prototype.get=function(e){return this.cache[e]},Me.prototype.set=function(e,t){this.cache[e]=t};const Ne=(e,t={})=>{let{bounds:n,axis:o="both",gpuAcceleration:r=!0,applyUserSelectHack:i=!0,disabled:s=!1,ignoreMultitouch:a=!1,grid:c,position:l,cancel:u,handle:d,defaultClass:f="neodrag",defaultClassDragging:p="neodrag-dragging",defaultClassDragged:h="neodrag-dragged",defaultPosition:g={x:0,y:0},onDragStart:m,onDrag:v,onDragEnd:w}=t;const y=new Promise(requestAnimationFrame);let $,b,x=!1,k=0,E=0,S=0,j=0,C=0,L=0,{x:P,y:R}=l?{x:l?.x??0,y:l?.y??0}:g;We(P,R,e,r);let _,A,M,N,D="",U=!!l;const I=document.body.style,H=e.classList,O=(t,n)=>{const o={offsetX:k,offsetY:E,domRect:e.getBoundingClientRect()};e.dispatchEvent(new CustomEvent(t,{detail:o})),n?.(o)},B=addEventListener;B("touchstart",T,!1),B("touchend",z,!1),B("touchmove",F,!1),B("mousedown",T,!1),B("mouseup",z,!1),B("mousemove",F,!1),e.style.touchAction="none";const W=()=>{let t=e.offsetWidth/A.width;return isNaN(t)&&(t=1),t};function T(t){if(s)return;if(a&&"touchstart"===t.type&&t.touches.length>1)return;if(H.add(f),M=function(e,t){if(!e)return t;if(e instanceof HTMLElement||Array.isArray(e))return e;const n=t.querySelectorAll(e);if(null===n)throw new Error("Selector passed for `handle` option should be child of the element on which the action is applied");return Array.from(n.values())}(d,e),N=function(e,t){if(!e)return;if(e instanceof HTMLElement||Array.isArray(e))return e;const n=t.querySelectorAll(e);if(null===n)throw new Error("Selector passed for `cancel` option should be child of the element on which the action is applied");return Array.from(n.values())}(u,e),$=/(both|x)/.test(o),b=/(both|y)/.test(o),void 0!==n&&(_=function(e,t){if(e instanceof HTMLElement)return e.getBoundingClientRect();if("object"==typeof e){const{top:t=0,left:n=0,right:o=0,bottom:r=0}=e;return{top:t,right:window.innerWidth-o,bottom:window.innerHeight-r,left:n}}if("parent"===e)return t.parentNode.getBoundingClientRect();const n=document.querySelector(e);if(null===n)throw new Error("The selector provided for bound doesn't exists in the document.");return n.getBoundingClientRect()}(n,e)),A=e.getBoundingClientRect(),Ie(d)&&Ie(u)&&d===u)throw new Error("`handle` selector can't be same as `cancel` selector");if(Be(N,M))throw new Error("Element being dragged can't be a child of the element on which `cancel` is applied");if((M instanceof HTMLElement?M.contains(t.target):M.some((e=>e.contains(t.target))))&&!Be(N,t.target)&&(x=!0),!x)return;i&&(D=I.userSelect,I.userSelect="none"),O("neodrag:start",m);const{clientX:r,clientY:c}=De(t)?t.touches[0]:t,l=W();$&&(S=r-P/l),b&&(j=c-R/l),_&&(C=r-A.left,L=c-A.top)}function z(){x&&(H.remove(p),H.add(h),i&&(I.userSelect=D),O("neodrag:end",w),$&&(S=k),$&&(j=E),x=!1)}function F(t){if(!x)return;H.add(p),t.preventDefault(),A=e.getBoundingClientRect();const{clientX:n,clientY:o}=De(t)?t.touches[0]:t;let i=n,s=o;const a=W();if(_){const e={left:_.left+C,top:_.top+L,right:_.right+C-A.width,bottom:_.bottom+L-A.height};i=Ue(i,e.left,e.right),s=Ue(s,e.top,e.bottom)}if(Array.isArray(c)){let[e,t]=c;if(isNaN(+e)||e<0)throw new Error("1st argument of `grid` must be a valid positive number");if(isNaN(+t)||t<0)throw new Error("2nd argument of `grid` must be a valid positive number");let n=i-S,o=s-j;[n,o]=He([Math.floor(e/a),Math.floor(t/a)],n,o),i=S+n,s=j+o}$&&(k=(i-S)*a),b&&(E=(s-j)*a),P=k,R=E,O("neodrag",v),y.then((()=>We(k,E,e,r)))}return{destroy:()=>{const e=removeEventListener;e("touchstart",T,!1),e("touchend",z,!1),e("touchmove",F,!1),e("mousedown",T,!1),e("mouseup",z,!1),e("mousemove",F,!1)},update:t=>{o=t.axis||"both",s=t.disabled??!1,a=t.ignoreMultitouch??!1,d=t.handle,n=t.bounds,u=t.cancel,i=t.applyUserSelectHack??!0,c=t.grid,r=t.gpuAcceleration??!0;const l=H.contains(h);H.remove(f,h),f=t.defaultClass??"neodrag",p=t.defaultClassDragging??"neodrag-dragging",h=t.defaultClassDragged??"neodrag-dragged",H.add(f),l&&H.add(h),U&&(P=k=t.position?.x??k,R=E=t.position?.y??E,y.then((()=>We(k,E,e,r))))}}},De=e=>!!e.touches?.length,Ue=(e,t,n)=>Math.min(Math.max(e,t),n),Ie=e=>"string"==typeof e,He=(Oe=([e,t],n,o)=>{const r=(e,t)=>Math.round(e/t)*t;return[r(n,e),r(o,t)]},function(e,t){return function(e,t,n,o,r){return n.bind(t,e,o,r)}(e,this,1===e.length?Re:_e,t.cache.create(),t.serializer)}(Oe,{cache:{create:function(){return new Me}},serializer:Ae}));var Oe;function Be(e,t){const n=t instanceof HTMLElement?[t]:t;return e instanceof HTMLElement?n.some((t=>e.contains(t))):!!Array.isArray(e)&&e.some((e=>n.some((t=>e.contains(t)))))}function We(e,t,n,o){n.style.transform=o?`translate3d(${+e}px, ${+t}px, 0)`:`translate(${+e}px, ${+t}px)`}function Te(e){b(e,"svelte-1es2uhx","svg.svelte-1es2uhx{width:auto;height:2em;display:block}")}function ze(t){let n;return{c(){n=C("div"),n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 1440 1440" width="100" height="100" class="svelte-1es2uhx"><defs></defs><defs><path id="a" d="M258 1321c9-304 6-917 0-1191 52-161 1082-280 1083 330 1 609-618 545-701 538-2 67-2 208 0 422-222 56-349 23-382-99z"></path><path id="c" d="M1122 560c-107 223-284 293-529 209l-38 79c-1 2-4 2-5-1l-99-287c-1-5 1-11 6-13l273-106c3-1 6 2 5 5l-36 75c70 126 211 139 423 39z"></path><path id="d" d="M451 447c107-223 284-292 529-209l38-78c1-3 5-2 5 0l99 288c1 5-1 10-6 12L843 567c-3 1-6-3-5-6l37-75c-71-126-212-139-424-39z"></path><radialGradient id="b" cx="992.3" cy="174.2" r="1312.8" gradientUnits="userSpaceOnUse"><stop offset="0%" stop-color="#69ed66"></stop><stop offset="100%" stop-color="#279c19"></stop></radialGradient></defs><use fill="url(#b)" xlink:href="#a"></use><use fill="#fff" xlink:href="#c"></use><use fill="#fff" xlink:href="#d"></use></svg>'},m(e,t){S(e,n,t)},p:e,i:e,o:e,d(e){e&&j(n)}}}class Fe extends ke{constructor(e){super(),xe(this,e,null,ze,s,{},Te)}}function Ve(e){b(e,"svelte-kdu04f",".container.svelte-kdu04f.svelte-kdu04f{display:flex;align-items:center;position:absolute;top:6px;right:5px;z-index:100;cursor:pointer;margin:1.618em;opacity:0.95;width:auto}.menu-icon.svelte-kdu04f.svelte-kdu04f{display:inline-block}.bar1.svelte-kdu04f.svelte-kdu04f,.bar2.svelte-kdu04f.svelte-kdu04f,.bar3.svelte-kdu04f.svelte-kdu04f{width:35px;height:5px;background-color:#0bb113;margin:6px 0;transition:0.4s}.change.svelte-kdu04f .bar1.svelte-kdu04f{-webkit-transform:rotate(-45deg) translate(-9px, 6px);transform:rotate(-45deg) translate(-9px, 6px)}.change.svelte-kdu04f .bar2.svelte-kdu04f{opacity:0}.change.svelte-kdu04f .bar3.svelte-kdu04f{-webkit-transform:rotate(45deg) translate(-8px, -8px);transform:rotate(45deg) translate(-8px, -8px)}.sidenav.svelte-kdu04f.svelte-kdu04f{position:fixed;top:0;right:0;height:15%;width:0;z-index:50;background-color:#111;overflow-x:inherit;padding-top:30px;transition:0.25s}.open.svelte-kdu04f.svelte-kdu04f{width:80%;height:100%;overflow-x:scroll}.mask.svelte-kdu04f.svelte-kdu04f{width:100%;height:100%;position:fixed;top:0;left:0;opacity:0.5;background-color:#444;transition:0.4s}@media screen and (max-height: 450px){.sidenav.svelte-kdu04f.svelte-kdu04f{padding-top:15px}}")}const Ke=e=>({saveInputURL:8&e,inputUrl:1&e}),Ye=e=>({openNav:e[7],hideNav:e[6],saveInputURL:e[3],inputUrl:e[0]});function qe(e){let t,n;const o=e[9].default,r=l(o,e,e[8],Ye);return{c(){t=C("div"),r&&r.c(),A(t,"class","sidenav svelte-kdu04f"),H(t,"open",e[2])},m(e,o){S(e,t,o),r&&r.m(t,null),n=!0},p(e,i){r&&r.p&&(!n||265&i)&&f(r,o,e,e[8],n?d(o,e[8],i,Ke):p(e[8]),Ye),(!n||4&i)&&H(t,"open",e[2])},i(e){n||(pe(r,e),n=!0)},o(e){he(r,e),n=!1},d(e){e&&j(t),r&&r.d(e)}}}function Je(t){let n,o,s,a,c,l,u,d,f,p,h;o=new Fe({});let g=t[1]&&qe(t);return{c(){n=C("div"),we(o.$$.fragment),s=P(),a=C("div"),a.innerHTML='<div class="bar1 svelte-kdu04f"></div> \n\t\t<div class="bar2 svelte-kdu04f"></div> \n\t\t<div class="bar3 svelte-kdu04f"></div>',c=P(),l=C("div"),u=P(),g&&g.c(),d=R(),A(a,"class","menu-icon svelte-kdu04f"),A(n,"class","container svelte-kdu04f"),H(n,"change",t[2]),A(l,"class","svelte-kdu04f"),H(l,"mask",t[2])},m(r,m){var v;S(r,n,m),ye(o,n,null),$(n,s),$(n,a),S(r,c,m),S(r,l,m),S(r,u,m),g&&g.m(r,m),S(r,d,m),f=!0,p||(h=[_(n,"keypress",t[4]),_(n,"click",t[4]),(v=Ne.call(null,n),v&&i(v.destroy)?v.destroy:e),_(l,"keypress",t[5]),_(l,"click",t[5])],p=!0)},p(e,[t]){(!f||4&t)&&H(n,"change",e[2]),(!f||4&t)&&H(l,"mask",e[2]),e[1]?g?(g.p(e,t),2&t&&pe(g,1)):(g=qe(e),g.c(),pe(g,1),g.m(d.parentNode,d)):g&&(de(),he(g,1,1,(()=>{g=null})),fe())},i(e){f||(pe(o.$$.fragment,e),pe(g),f=!0)},o(e){he(o.$$.fragment,e),he(g),f=!1},d(e){e&&j(n),$e(o),e&&j(c),e&&j(l),e&&j(u),g&&g.d(e),e&&j(d),p=!1,r(h)}}}const Xe="INPUT_URL";function Ge(e,t,n){let o,r,i,{$$slots:s={},$$scope:a}=t,{inputUrl:c}=t;Y((async()=>{if(void 0===window.indexedDB)return void console.log("IndexedDB not available");const{ImmortalDB:e}=await Promise.resolve().then((function(){return rn}));n(3,i=async t=>{const n=t.detail;try{await e.set(Xe,n)}catch(e){console.warn("Did not save",n,e)}});try{const t=await e.get(Xe,null);t&&!c&&n(0,c=t)}catch(e){console.warn("Did not get",e)}n(1,o=!0)}));return e.$$set=e=>{"inputUrl"in e&&n(0,c=e.inputUrl),"$$scope"in e&&n(8,a=e.$$scope)},[c,o,r,i,function(){n(2,r=!r)},function(e){n(2,r=!1)},function(){n(2,r=!1)},()=>n(2,r=!0),a,s]}class Ze extends ke{constructor(e){super(),xe(this,e,Ge,Je,s,{inputUrl:0},Ve)}}function Qe(e,{delay:n=0,duration:o=400,easing:r=t}={}){const i=+getComputedStyle(e).opacity;return{delay:n,duration:o,easing:r,css:e=>"opacity: "+e*i}}var et,tt,nt,ot,rt;!function(e){e.Call="call",e.Reply="reply",e.Syn="syn",e.SynAck="synAck",e.Ack="ack"}(et||(et={})),function(e){e.Fulfilled="fulfilled",e.Rejected="rejected"}(tt||(tt={})),function(e){e.ConnectionDestroyed="ConnectionDestroyed",e.ConnectionTimeout="ConnectionTimeout",e.NoIframeSrc="NoIframeSrc"}(nt||(nt={})),function(e){e.DataCloneError="DataCloneError"}(ot||(ot={})),function(e){e.Message="message"}(rt||(rt={}));const it={"http:":"80","https:":"443"},st=/^(https?:)?\/\/([^/:]+)?(:(\d+))?/,at=["file:","data:"];const ct=({name:e,message:t,stack:n})=>({name:e,message:t,stack:n});let lt=0;var ut=()=>++lt;const dt=e=>e?e.split("."):[],ft=(e,t,n)=>{const o=dt(t);return o.reduce(((e,t,r)=>(void 0===e[t]&&(e[t]={}),r===o.length-1&&(e[t]=n),e[t])),e),e},pt=(e,t)=>{const n={};return Object.keys(e).forEach((o=>{const r=e[o],i=((e,t)=>{const n=dt(t||"");return n.push(e),(e=>e.join("."))(n)})(o,t);"object"==typeof r&&Object.assign(n,pt(r,i)),"function"==typeof r&&(n[i]=r)})),n};var ht=(e,t,n,o,r)=>{const{localName:i,local:s,remote:a,originForSending:c,originForReceiving:l}=t;let u=!1;r(`${i}: Connecting call sender`);const d=e=>(...t)=>{let n;r(`${i}: Sending ${e}() call`);try{a.closed&&(n=!0)}catch(e){n=!0}if(n&&o(),u){const t=new Error(`Unable to send ${e}() call due to destroyed connection`);throw t.code=nt.ConnectionDestroyed,t}return new Promise(((n,o)=>{const u=ut(),d=t=>{if(t.source!==a||t.data.penpal!==et.Reply||t.data.id!==u)return;if("*"!==l&&t.origin!==l)return void r(`${i} received message from origin ${t.origin} which did not match expected origin ${l}`);const c=t.data;r(`${i}: Received ${e}() reply`),s.removeEventListener(rt.Message,d);let f=c.returnValue;c.returnValueIsError&&(f=(e=>{const t=new Error;return Object.keys(e).forEach((n=>t[n]=e[n])),t})(f)),(c.resolution===tt.Fulfilled?n:o)(f)};s.addEventListener(rt.Message,d);const f={penpal:et.Call,id:u,methodName:e,args:t};a.postMessage(f,c)}))},f=n.reduce(((e,t)=>(e[t]=d(t),e)),{});return Object.assign(e,(e=>{const t={};for(const n in e)ft(t,n,e[n]);return t})(f)),()=>{u=!0}},gt=(e,t,n,o,r)=>{const{destroy:i,onDestroy:s}=o;let a,c;const l={};return o=>{if("*"!==t&&o.origin!==t)return void r(`Parent: Handshake - Received ACK message from origin ${o.origin} which did not match expected origin ${t}`);r("Parent: Handshake - Received ACK");const u={localName:"Parent",local:window,remote:o.source,originForSending:n,originForReceiving:t};a&&a(),a=((e,t,n)=>{const{localName:o,local:r,remote:i,originForSending:s,originForReceiving:a}=e;let c=!1;const l=e=>{if(e.source!==i||e.data.penpal!==et.Call)return;if("*"!==a&&e.origin!==a)return void n(`${o} received message from origin ${e.origin} which did not match expected origin ${a}`);const r=e.data,{methodName:l,args:u,id:d}=r;n(`${o}: Received ${l}() call`);const f=e=>t=>{if(n(`${o}: Sending ${l}() reply`),c)return void n(`${o}: Unable to send ${l}() reply due to destroyed connection`);const r={penpal:et.Reply,id:d,resolution:e,returnValue:t};e===tt.Rejected&&t instanceof Error&&(r.returnValue=ct(t),r.returnValueIsError=!0);try{i.postMessage(r,s)}catch(e){if(e.name===ot.DataCloneError){const t={penpal:et.Reply,id:d,resolution:tt.Rejected,returnValue:ct(e),returnValueIsError:!0};i.postMessage(t,s)}throw e}};new Promise((e=>e(t[l].apply(t,u)))).then(f(tt.Fulfilled),f(tt.Rejected))};return r.addEventListener(rt.Message,l),()=>{c=!0,r.removeEventListener(rt.Message,l)}})(u,e,r),s(a),c&&c.forEach((e=>{delete l[e]})),c=o.data.methodNames;const d=ht(l,u,c,i,r);return s(d),l}};var mt=e=>{let{iframe:t,methods:n={},childOrigin:o,timeout:r,debug:i=!1}=e;const s=(e=>(...t)=>{e&&console.log("[Penpal]",...t)})(i),a=((e,t)=>{const n=[];let o=!1;return{destroy(r){o||(o=!0,t(`${e}: Destroying connection`),n.forEach((e=>{e(r)})))},onDestroy(e){o?e():n.push(e)}}})("Parent",s),{onDestroy:c,destroy:l}=a;o||((e=>{if(!e.src&&!e.srcdoc){const e=new Error("Iframe must have src or srcdoc property defined.");throw e.code=nt.NoIframeSrc,e}})(t),o=(e=>{if(e&&at.find((t=>e.startsWith(t))))return"null";const t=document.location,n=st.exec(e);let o,r,i;return n?(o=n[1]?n[1]:t.protocol,r=n[2],i=n[4]):(o=t.protocol,r=t.hostname,i=t.port),`${o}//${r}${i&&i!==it[o]?`:${i}`:""}`})(t.src));const u="null"===o?"*":o,d=pt(n),f=((e,t,n,o)=>r=>{if("*"!==n&&r.origin!==n)return void e(`Parent: Handshake - Received SYN message from origin ${r.origin} which did not match expected origin ${n}`);e("Parent: Handshake - Received SYN, responding with SYN-ACK");const i={penpal:et.SynAck,methodNames:Object.keys(t)};r.source.postMessage(i,o)})(s,d,o,u),p=gt(d,o,u,a,s),h=new Promise(((e,n)=>{const o=((e,t)=>{let n;return void 0!==e&&(n=window.setTimeout((()=>{const n=new Error(`Connection timed out after ${e}ms`);n.code=nt.ConnectionTimeout,t(n)}),e)),()=>{clearTimeout(n)}})(r,l),i=n=>{if(n.source===t.contentWindow&&n.data)if(n.data.penpal!==et.Syn)if(n.data.penpal!==et.Ack);else{const t=p(n);t&&(o(),e(t))}else f(n)};window.addEventListener(rt.Message,i),s("Parent: Awaiting handshake"),((e,t)=>{const{destroy:n,onDestroy:o}=t,r=setInterval((()=>{e.isConnected||(clearInterval(r),n())}),6e4);o((()=>{clearInterval(r)}))})(t,a),c((e=>{window.removeEventListener(rt.Message,i),e&&n(e)}))}));return{promise:h,destroy(){l()}}};function vt(e){b(e,"svelte-boxns1","button.svelte-boxns1{cursor:pointer;flex:0 0 auto;position:relative;opacity:0.8;height:100%;display:flex;align-items:center;justify-content:center}button.svelte-boxns1{color:inherit;background:none;border:none;margin:0;padding:0;font-size:1em;cursor:pointer}.img-container.svelte-boxns1{margin:calc(var(--spacing) / 2);width:1.6em;height:1.6em;position:relative}svg.svelte-boxns1{width:100%;height:100%;top:0;bottom:0;left:0;right:0;position:absolute}")}function wt(e){let t,n,o;return{c(){t=C("div"),t.innerHTML='<svg v-if="icon === &#39;close&#39;" xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" viewBox="0 0 24 24" fill="currentColor" class="svelte-boxns1"><rect fill="none" height="24" width="24"></rect><path d="M3,3v18h18V3H3z M17,15.59L15.59,17L12,13.41L8.41,17L7,15.59L10.59,12L7,8.41L8.41,7L12,10.59L15.59,7L17,8.41L13.41,12 L17,15.59z"></path></svg>'},m(e,n){S(e,t,n),o=!0},i(e){o||(ne((()=>{n||(n=me(t,Qe,{delay:100,duration:100},!0)),n.run(1)})),o=!0)},o(e){n||(n=me(t,Qe,{delay:100,duration:100},!1)),n.run(0),o=!1},d(e){e&&j(t),e&&n&&n.end()}}}function yt(e){let t,n,o;return{c(){t=C("div"),t.innerHTML='<svg v-else-if="icon === &#39;launch&#39;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="svelte-boxns1"><path d="M0 0h24v24H0z" fill="none"></path><path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"></path></svg>'},m(e,n){S(e,t,n),o=!0},i(e){o||(ne((()=>{n||(n=me(t,Qe,{delay:100,duration:100},!0)),n.run(1)})),o=!0)},o(e){n||(n=me(t,Qe,{delay:100,duration:100},!1)),n.run(0),o=!1},d(e){e&&j(t),e&&n&&n.end()}}}function $t(e){let t,n,o;return{c(){t=C("div"),t.innerHTML='<svg v-else-if="icon === &#39;plug&#39;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="svelte-boxns1"><path d="M0 0h24v24H0z" fill="none"></path><path d="M16.01 7L16 3h-2v4h-4V3H8v4h-.01C7 6.99 6 7.99 6 8.99v5.49L9.5 18v3h5v-3l3.5-3.51v-5.5c0-1-1-2-1.99-1.99z"></path></svg>'},m(e,n){S(e,t,n),o=!0},i(e){o||(ne((()=>{n||(n=me(t,Qe,{delay:100,duration:100},!0)),n.run(1)})),o=!0)},o(e){n||(n=me(t,Qe,{delay:100,duration:100},!1)),n.run(0),o=!1},d(e){e&&j(t),e&&n&&n.end()}}}function bt(e){let t,n,o;return{c(){t=C("div"),t.innerHTML='<svg v-else-if="icon === &#39;unplug&#39;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="svelte-boxns1"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M18 14.49V9c0-1-1.01-2.01-2-2V3h-2v4h-4V3H8v2.48l9.51 9.5.49-.49zm-1.76 1.77L7.2 7.2l-.01.01L3.98 4 2.71 5.25l3.36 3.36C6.04 8.74 6 8.87 6 9v5.48L9.5 18v3h5v-3l.48-.48L19.45 22l1.26-1.28-4.47-4.46z"></path></svg>'},m(e,n){S(e,t,n),o=!0},i(e){o||(ne((()=>{n||(n=me(t,Qe,{delay:100,duration:100},!0)),n.run(1)})),o=!0)},o(e){n||(n=me(t,Qe,{delay:100,duration:100},!1)),n.run(0),o=!1},d(e){e&&j(t),e&&n&&n.end()}}}function xt(e){let t,n,o,i,s,a,c,u,h,g="close"===e[0]&&wt(),m="launch"===e[0]&&yt(),v="plug"===e[0]&&$t(),w="unplug"===e[0]&&bt();const y=e[3].default,b=l(y,e,e[2],null);return{c(){t=C("button"),n=C("div"),g&&g.c(),o=P(),m&&m.c(),i=P(),v&&v.c(),s=P(),w&&w.c(),a=P(),b&&b.c(),A(n,"class","img-container svelte-boxns1"),A(t,"class","svelte-boxns1")},m(r,l){S(r,t,l),$(t,n),g&&g.m(n,null),$(n,o),m&&m.m(n,null),$(n,i),v&&v.m(n,null),$(n,s),w&&w.m(n,null),$(t,a),b&&b.m(t,null),c=!0,u||(h=[_(t,"keypress",e[4]),_(t,"click",e[5])],u=!0)},p(e,[t]){"close"===e[0]?g?1&t&&pe(g,1):(g=wt(),g.c(),pe(g,1),g.m(n,o)):g&&(de(),he(g,1,1,(()=>{g=null})),fe()),"launch"===e[0]?m?1&t&&pe(m,1):(m=yt(),m.c(),pe(m,1),m.m(n,i)):m&&(de(),he(m,1,1,(()=>{m=null})),fe()),"plug"===e[0]?v?1&t&&pe(v,1):(v=$t(),v.c(),pe(v,1),v.m(n,s)):v&&(de(),he(v,1,1,(()=>{v=null})),fe()),"unplug"===e[0]?w?1&t&&pe(w,1):(w=bt(),w.c(),pe(w,1),w.m(n,null)):w&&(de(),he(w,1,1,(()=>{w=null})),fe()),b&&b.p&&(!c||4&t)&&f(b,y,e,e[2],c?d(y,e[2],t,null):p(e[2]),null)},i(e){c||(pe(g),pe(m),pe(v),pe(w),pe(b,e),c=!0)},o(e){he(g),he(m),he(v),he(w),he(b,e),c=!1},d(e){e&&j(t),g&&g.d(),m&&m.d(),v&&v.d(),w&&w.d(),b&&b.d(e),u=!1,r(h)}}}function kt(e,t,n){let{$$slots:o={},$$scope:r}=t,{icon:i}=t;const s=q();return e.$$set=e=>{"icon"in e&&n(0,i=e.icon),"$$scope"in e&&n(2,r=e.$$scope)},[i,s,r,o,()=>s("click","detail value"),()=>s("click","detail value")]}class Et extends ke{constructor(e){super(),xe(this,e,kt,xt,s,{icon:0},vt)}}const{window:St}=ve;function jt(e){b(e,"svelte-12a3ajw","div.svelte-12a3ajw{--spacing:1em}.connector-container.svelte-12a3ajw{padding:1.618em}div.svelte-12a3ajw{--background:#161616}.top.svelte-12a3ajw{display:flex;justify-content:space-between;align-items:center}iframe.svelte-12a3ajw{border:none;width:100%;height:100%}.iframe.svelte-12a3ajw{display:flex;height:100%;min-height:500px}.logo.svelte-12a3ajw{flex:0 0 auto;position:relative;opacity:1;height:100%;display:flex;align-items:center;justify-content:center;padding:calc(var(--spacing) / 2)}.url.svelte-12a3ajw{padding:var(--spacing);padding-right:0;flex:1 1 0;min-width:0;outline:none;background-color:var(--background)}.green-line.svelte-12a3ajw{border-bottom:4px solid #0eff02;margin-left:var(--spacing);flex:1;position:relative;top:-8px}.actions.svelte-12a3ajw{display:flex}.actions.svelte-12a3ajw:last-child{padding-right:calc(var(--spacing) / 2)}.action.dim.svelte-12a3ajw{opacity:0.9;color:#e0f7fa}.connected.svelte-12a3ajw{color:greenyellow;text-shadow:1px 1px 3px black}.disconnected.svelte-12a3ajw{color:#e0f7fa;text-shadow:1px 1px 3px black}.url-input-container.svelte-12a3ajw{display:flex;flex-direction:column;width:100%}input.svelte-12a3ajw{flex:1 1 0;color:whitesmoke;background:none;border:none;margin:0;padding:0;font-size:0.95em;min-width:15ch}")}function Ct(e){let t,n,o,r,i;return n=new Et({props:{icon:e[11]}}),n.$on("keypress",e[14]),n.$on("click",e[14]),{c(){t=C("div"),we(n.$$.fragment),A(t,"class",o=h(e[0]?.keepPopup?"action":"action dim")+" svelte-12a3ajw")},m(e,o){S(e,t,o),ye(n,t,null),i=!0},p(e,r){const s={};2048&r&&(s.icon=e[11]),n.$set(s),(!i||1&r&&o!==(o=h(e[0]?.keepPopup?"action":"action dim")+" svelte-12a3ajw"))&&A(t,"class",o)},i(e){i||(pe(n.$$.fragment,e),ne((()=>{r||(r=me(t,Qe,{delay:100,duration:100},!0)),r.run(1)})),i=!0)},o(e){he(n.$$.fragment,e),r||(r=me(t,Qe,{delay:100,duration:100},!1)),r.run(0),i=!1},d(e){e&&j(t),$e(n),e&&r&&r.end()}}}function Lt(e){let t,n,o,r=e[9].loading||!e[7]?"Loading...":"Load";return{c(){t=C("span"),n=L(r),A(t,"class",o=h(e[0]?.address?" connected ":" disconnected ")+" svelte-12a3ajw")},m(e,o){S(e,t,o),$(t,n)},p(e,i){640&i&&r!==(r=e[9].loading||!e[7]?"Loading...":"Load")&&function(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}(n,r),1&i&&o!==(o=h(e[0]?.address?" connected ":" disconnected ")+" svelte-12a3ajw")&&A(t,"class",o)},d(e){e&&j(t)}}}function Pt(e){let t,n,o,i,s,a,l,u,d,f,p,g,m,v,w,y,b,x,k,E,L,R,D,U,H;s=new Fe({});let O=(e[0]?.address||e[1])&&Ct(e);return w=new Et({props:{icon:e[10],$$slots:{default:[Lt]},$$scope:{ctx:e}}}),w.$on("keypress",e[22]),w.$on("click",e[23]),{c(){t=C("div"),n=C("div"),o=C("a"),i=C("div"),we(s.$$.fragment),a=P(),l=C("div"),u=C("input"),d=P(),f=C("span"),p=P(),g=C("div"),O&&O.c(),m=P(),v=C("div"),we(w.$$.fragment),x=P(),k=C("div"),E=C("iframe"),A(i,"class","actions logo svelte-12a3ajw"),A(o,"href","https://PeerPiper.io"),A(o,"target","_blank"),A(o,"rel","noreferrer"),A(u,"class","url svelte-12a3ajw"),A(u,"placeholder",Rt),A(f,"class","green-line svelte-12a3ajw"),A(l,"class","url-input-container svelte-12a3ajw"),A(v,"class",y=h(e[9]?.loading?"action dim":e[0]?.address?" connected ":" disconnected ")+" svelte-12a3ajw"),A(g,"class","actions svelte-12a3ajw"),A(n,"class","top svelte-12a3ajw"),N(n,"--topOffsetHeight",e[2]),ne((()=>e[24].call(n))),A(E,"title","Web Wallet"),c(E.src,L=e[7])||A(E,"src",L),A(E,"allow","clipboard-read 'self' 'src'; clipboard-write 'self' 'src';"),A(E,"class","svelte-12a3ajw"),A(k,"class","iframe svelte-12a3ajw"),N(k,"height","calc("+e[4]+"px + 18px)"),ne((()=>e[26].call(k))),A(t,"class","connector-container svelte-12a3ajw")},m(r,c){S(r,t,c),$(t,n),$(n,o),$(o,i),ye(s,i,null),$(n,a),$(n,l),$(l,u),M(u,e[1]),$(l,d),$(l,f),$(n,p),$(n,g),O&&O.m(g,null),$(g,m),$(g,v),ye(w,v,null),b=I(n,e[24].bind(n)),$(t,x),$(t,k),$(k,E),e[25](E),R=I(k,e[26].bind(k)),D=!0,U||(H=[_(St,"keydown",e[15]),_(u,"focus",e[19]),_(u,"blur",e[20]),_(u,"input",e[21])],U=!0)},p(e,[t]){2&t&&u.value!==e[1]&&M(u,e[1]),e[0]?.address||e[1]?O?(O.p(e,t),3&t&&pe(O,1)):(O=Ct(e),O.c(),pe(O,1),O.m(g,m)):O&&(de(),he(O,1,1,(()=>{O=null})),fe());const o={};1024&t&&(o.icon=e[10]),536871553&t&&(o.$$scope={dirty:t,ctx:e}),w.$set(o),(!D||513&t&&y!==(y=h(e[9]?.loading?"action dim":e[0]?.address?" connected ":" disconnected ")+" svelte-12a3ajw"))&&A(v,"class",y),(!D||4&t)&&N(n,"--topOffsetHeight",e[2]),(!D||128&t&&!c(E.src,L=e[7]))&&A(E,"src",L),(!D||16&t)&&N(k,"height","calc("+e[4]+"px + 18px)")},i(e){D||(pe(s.$$.fragment,e),pe(O),pe(w.$$.fragment,e),D=!0)},o(e){he(s.$$.fragment,e),he(O),he(w.$$.fragment,e),D=!1},d(n){n&&j(t),$e(s),O&&O.d(),$e(w),b(),e[25](null),R(),U=!1,r(H)}}}let Rt="Enter Wallet Url";function _t(e,t,n){let o,r,i,{wallet:s=null}=t,{inputUrl:a="https://peerpiper.github.io/iframe-wallet-sdk/"}=t,{topOffsetHeight:c=0}=t,{topOffsetWidth:l=0}=t,{iframeParentHeight:u=0}=t,{iframeParentWidth:d=0}=t,{show:f}=t,{hide:p}=t;const h=q();let g,m,v;const w={loading:!0};async function y(){let e;n(9,w.loading=!1,w);const t=mt({iframe:m,methods:{setIframeParentHeight(e){n(4,u=e)},setIframeParentWidth(e){n(16,d=e)},show(){f()},hide(){console.log("hiding",{hide:p}),p()},walletReady:()=>(n(0,s=e),h("walletReady",{wallet:s}),window.arweaveWallet=s.arweaveWalletAPI,s&&setTimeout((()=>{p()}),250),!0)}});e=await t.promise,f()}Y((async()=>{$()}));const $=()=>{g!==a&&(n(7,g=""),n(7,g=a),n(9,w.loading=!0,w),h("inputUrl",a))},b=()=>s.disconnect();return e.$$set=e=>{"wallet"in e&&n(0,s=e.wallet),"inputUrl"in e&&n(1,a=e.inputUrl),"topOffsetHeight"in e&&n(2,c=e.topOffsetHeight),"topOffsetWidth"in e&&n(3,l=e.topOffsetWidth),"iframeParentHeight"in e&&n(4,u=e.iframeParentHeight),"iframeParentWidth"in e&&n(16,d=e.iframeParentWidth),"show"in e&&n(17,f=e.show),"hide"in e&&n(18,p=e.hide)},e.$$.update=()=>{64&e.$$.dirty&&m&&m.addEventListener("load",y),1&e.$$.dirty&&n(11,o=s?.keepPopup?"close":"launch"),1&e.$$.dirty&&n(10,r=s?.address?"unplug":"plug"),33&e.$$.dirty&&i&&s&&s?.setWidth(i)},[s,a,c,l,u,i,m,g,v,w,r,o,$,b,()=>window.open(a),function(e){"Enter"===e.key&&v&&$()},d,f,p,()=>n(8,v=!0),()=>n(8,v=!1),function(){a=this.value,n(1,a)},()=>{s?.address?b():$()},()=>{s?.address?b():$()},function(){c=this.offsetHeight,l=this.offsetWidth,n(2,c),n(3,l)},function(e){G[e?"unshift":"push"]((()=>{m=e,n(6,m)}))},function(){i=this.offsetWidth,n(5,i)}]}class At extends ke{constructor(e){super(),xe(this,e,_t,Pt,s,{wallet:0,inputUrl:1,topOffsetHeight:2,topOffsetWidth:3,iframeParentHeight:4,iframeParentWidth:16,show:17,hide:18},jt)}}function Mt(e){let t,n;return t=new Ze({props:{inputUrl:e[1],$$slots:{default:[Nt,({openNav:e,hideNav:t,saveInputURL:n,inputUrl:o})=>({5:e,6:t,7:n,1:o}),({openNav:e,hideNav:t,saveInputURL:n,inputUrl:o})=>(e?32:0)|(t?64:0)|(n?128:0)|(o?2:0)]},$$scope:{ctx:e}}}),{c(){we(t.$$.fragment)},m(e,o){ye(t,e,o),n=!0},p(e,n){const o={};2&n&&(o.inputUrl=e[1]),483&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){he(t.$$.fragment,e),n=!1},d(e){$e(t,e)}}}function Nt(e){let t,n,o;function r(t){e[3](t)}let s={show:e[5],hide:e[6],inputUrl:e[1]};return void 0!==e[0]&&(s.wallet=e[0]),t=new At({props:s}),G.push((()=>function(e,t,n){const o=e.$$.props[t];void 0!==o&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}(t,"wallet",r))),t.$on("walletReady",e[4]),t.$on("inputUrl",(function(){i(e[7])&&e[7].apply(this,arguments)})),{c(){we(t.$$.fragment)},m(e,n){ye(t,e,n),o=!0},p(o,r){e=o;const i={};var s;32&r&&(i.show=e[5]),64&r&&(i.hide=e[6]),2&r&&(i.inputUrl=e[1]),!n&&1&r&&(n=!0,i.wallet=e[0],s=()=>n=!1,Q.push(s)),t.$set(i)},i(e){o||(pe(t.$$.fragment,e),o=!0)},o(e){he(t.$$.fragment,e),o=!1},d(e){$e(t,e)}}}function Dt(e){let t,n,o=e[2]&&Mt(e);return{c(){o&&o.c(),t=R()},m(e,r){o&&o.m(e,r),S(e,t,r),n=!0},p(e,[n]){e[2]?o?(o.p(e,n),4&n&&pe(o,1)):(o=Mt(e),o.c(),pe(o,1),o.m(t.parentNode,t)):o&&(de(),he(o,1,1,(()=>{o=null})),fe())},i(e){n||(pe(o),n=!0)},o(e){he(o),n=!1},d(e){o&&o.d(e),e&&j(t)}}}function Ut(e,t,n){let o,{inputUrl:r="https://peerpiper.github.io/iframe-wallet-sdk/"}=t,{wallet:i=null}=t;return Y((()=>{n(2,o=!0)})),e.$$set=e=>{"inputUrl"in e&&n(1,r=e.inputUrl),"wallet"in e&&n(0,i=e.wallet)},[i,r,o,function(e){i=e,n(0,i)},function(t){J.call(this,e,t)}]}var It,Ht=Object.freeze({__proto__:null,default:class extends ke{constructor(e){super(),xe(this,e,Ut,Dt,s,{inputUrl:1,wallet:0})}}}),Ot={exports:{}};It=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var o in n)t[o]=n[o]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(o){function r(){}function i(t,n,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},r.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var s=JSON.stringify(n);/^[\{\[]/.test(s)&&(n=s)}catch(e){}n=o.write?o.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var c in i)i[c]&&(a+="; "+c,!0!==i[c]&&(a+="="+i[c].split(";")[0]));return document.cookie=t+"="+n+a}}function s(e,n){if("undefined"!=typeof document){for(var r={},i=document.cookie?document.cookie.split("; "):[],s=0;s<i.length;s++){var a=i[s].split("="),c=a.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var l=t(a[0]);if(c=(o.read||o)(c,l)||t(c),n)try{c=JSON.parse(c)}catch(e){}if(r[l]=c,e===l)break}catch(e){}}return e?r[e]:r}}return r.set=i,r.get=function(e){return s(e,!1)},r.getJSON=function(e){return s(e,!0)},r.remove=function(t,n){i(t,"",e(n,{expires:-1}))},r.defaults={},r.withConverter=n,r}((function(){}))},Ot.exports=It();var Bt=Ot.exports;const Wt=function(){try{return!Boolean(window.top.location.href)}catch(e){return!0}}(),Tt=!!Wt,zt=Wt?"None":"Lax";class Ft{constructor({ttl:e=365,secure:t=Tt,sameSite:n=zt}={}){return this.ttl=e,this.secure=t,this.sameSite=n,(async()=>this)()}async get(e){const t=Bt.get(e);return"string"==typeof t?t:void 0}async set(e,t){Bt.set(e,t,this._constructCookieParams())}async remove(e){Bt.remove(e,this._constructCookieParams())}_constructCookieParams(){return{expires:this.ttl,secure:this.secure,sameSite:this.sameSite}}}class Vt{constructor(e="keyval-store",t="keyval"){this.storeName=t,this._dbp=new Promise(((n,o)=>{const r=indexedDB.open(e,1);r.onerror=()=>o(r.error),r.onsuccess=()=>n(r.result),r.onupgradeneeded=()=>{r.result.createObjectStore(t)}}))}_withIDBStore(e,t){return this._dbp.then((n=>new Promise(((o,r)=>{const i=n.transaction(this.storeName,e);i.oncomplete=()=>o(),i.onabort=i.onerror=()=>r(i.error),t(i.objectStore(this.storeName))}))))}}let Kt;function Yt(){return Kt||(Kt=new Vt),Kt}class qt{constructor(e="ImmortalDB",t="key-value-pairs"){return this.store=new Vt(e,t),(async()=>{try{await this.store._dbp}catch(e){if("SecurityError"===e.name)return null;throw e}return this})()}async get(e){const t=await function(e,t=Yt()){let n;return t._withIDBStore("readonly",(t=>{n=t.get(e)})).then((()=>n.result))}(e,this.store);return"string"==typeof t?t:void 0}async set(e,t){await function(e,t,n=Yt()){return n._withIDBStore("readwrite",(n=>{n.put(t,e)}))}(e,t,this.store)}async remove(e){await function(e,t=Yt()){return t._withIDBStore("readwrite",(t=>{t.delete(e)}))}(e,this.store)}}class Jt{constructor(e){return this.store=e,(async()=>this)()}async get(e){const t=this.store.getItem(e);return"string"==typeof t?t:void 0}async set(e,t){this.store.setItem(e,t)}async remove(e){this.store.removeItem(e)}}class Xt extends Jt{constructor(){super(window.localStorage)}}const Gt=console.log,Zt="_immortal|",Qt="undefined"!=typeof window,en=[Ft];try{Qt&&window.indexedDB&&en.push(qt)}catch(e){}try{Qt&&window.localStorage&&en.push(Xt)}catch(e){}function tn(e,t,n=null){return t in e?e[t]:n}class nn{constructor(e=en){this.stores=[],this.onReady=(async()=>{this.stores=(await Promise.all(e.map((async e=>{if("object"==typeof e)return e;try{return await new e}catch(e){return null}})))).filter(Boolean)})()}async get(e,t=null){await this.onReady;const n=`_immortal|${e}`,o=await Promise.all(this.stores.map((async e=>{try{return await e.get(n)}catch(e){Gt(e)}}))),r=Array.from(function(e){const t=new Map;let n=e.slice();for(const e of n){let o=0;for(const t of n)e===t&&(o+=1);o>0&&(t.set(e,o),n=n.filter((t=>t!==e)))}return t}(o).entries());let i;r.sort(((e,t)=>e[1]<=t[1]));const[s,a]=tn(r,0,[void 0,0]),[c,l]=tn(r,1,[void 0,0]);return i=a>l||a===l&&void 0!==s?s:c,void 0!==i?(await this.set(e,i),i):(await this.remove(e),t)}async set(e,t){return await this.onReady,e=`_immortal|${e}`,await Promise.all(this.stores.map((async n=>{try{await n.set(e,t)}catch(e){Gt(e)}}))),t}async remove(e){await this.onReady,e=`_immortal|${e}`,await Promise.all(this.stores.map((async t=>{try{await t.remove(e)}catch(e){Gt(e)}})))}}const on=new nn;var rn=Object.freeze({__proto__:null,ImmortalDB:on,ImmortalStorage:nn,CookieStore:Ft,IndexedDbStore:qt,LocalStorageStore:Xt,SessionStorageStore:class extends Jt{constructor(){super(window.sessionStorage)}},DEFAULT_STORES:en,DEFAULT_KEY_PREFIX:Zt});return class extends ke{constructor(e){super(),xe(this,e,Pe,Le,s,{})}}}();
